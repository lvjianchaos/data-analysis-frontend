import{c as x,aK as E,au as p,J as g,n as k,o as y,Q as s,z as l,r as o,s as h,aL as B,aI as I,an as L,a7 as d,aM as R,a9 as q,aF as z,ab as C}from"./index-BSn_9fUV.js";import{E as F,a as N}from"./el-form-item-C2z0fzQ-.js";import"./_baseClone-Cd1X8XWG.js";const T={class:"login"},M=x({__name:"LoginView",setup(S){const c=q(),f=E(),_=z(),t=p({username:"",password:""}),w=async()=>{var e;r.value=!0,await((e=i.value)==null?void 0:e.validate().catch(a=>{throw d.error("表单校验失败..."),r.value=!1,a}));const n=await R(t).then(a=>{if(a.data.code===200)return a.data;throw d.error(a.data.message),r.value=!1,new Error(a.data.message)});console.log(n),f.setToken(n.data),r.value=!1,d.success(n.message),c.push(_.query.redirect||"/")},V=p({username:[{required:!0,message:"用户名不能为空",trigger:["change"]},{min:3,max:10,message:"长度需为3-10位",trigger:["blur"]},{pattern:/^[a-zA-Z0-9_]+$/,message:"只允许字母、数字和下划线",trigger:["blur"]}],password:[{required:!0,message:"密码不能为空",trigger:"change"},{min:6,max:18,message:"长度需为6-18位",trigger:["blur"]}]}),r=g(!1),i=g();return(n,e)=>{const a=B,u=N,b=I,v=F;return y(),k("div",T,[s(v,{model:o(t),rules:o(V),ref_key:"formRef",ref:i,"label-width":"auto",style:{"max-width":"600px"},"label-position":"top",size:"large"},{default:l(()=>[e[3]||(e[3]=h("h2",null,"登录",-1)),s(u,{label:"用户名",prop:"username"},{default:l(()=>[s(a,{modelValue:o(t).username,"onUpdate:modelValue":e[0]||(e[0]=m=>o(t).username=m)},null,8,["modelValue"])]),_:1}),s(u,{label:"密码",prop:"password"},{default:l(()=>[s(a,{modelValue:o(t).password,"onUpdate:modelValue":e[1]||(e[1]=m=>o(t).password=m)},null,8,["modelValue"])]),_:1}),s(u,null,{default:l(()=>[s(b,{type:"primary",onClick:w,loading:o(r)},{default:l(()=>e[2]||(e[2]=[L("登录")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])}}}),K=C(M,[["__scopeId","data-v-e70eda2a"]]);export{K as default};

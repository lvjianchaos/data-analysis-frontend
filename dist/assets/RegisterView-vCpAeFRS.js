import{c as b,au as p,J as f,n as V,o as v,Q as s,z as t,r as o,s as E,aL as x,aI as C,an as y,a7 as d,aN as R,aO as B,ab as I}from"./index-BSn_9fUV.js";import{E as N,a as k}from"./el-form-item-C2z0fzQ-.js";import"./_baseClone-Cd1X8XWG.js";const q={class:"register"},U=b({__name:"RegisterView",setup(z){const r=p({username:"",password:"",passwordConfirm:""}),g=async()=>{var e;n.value=!0,await((e=i.value)==null?void 0:e.validate().catch(a=>{throw d.error("表单校验失败..."),n.value=!1,a}));const m=await R(r).then(a=>{if(a.data.code===201)return d.success(a.data.message),B.push("/login"),a.data;throw d.error(a.data.message),n.value=!1,new Error(a.data.message)});console.log(m),n.value=!1},_=p({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}],passwordConfirm:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(m,e,a)=>{e!==r.password?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}]}),n=f(!1),i=f();return(m,e)=>{const a=x,u=k,w=C,c=N;return v(),V("div",q,[s(c,{model:o(r),rules:o(_),ref_key:"formRef",ref:i,"label-width":"auto",style:{"max-width":"600px"},"label-position":"top",size:"large"},{default:t(()=>[e[4]||(e[4]=E("h2",null,"注册",-1)),s(u,{label:"用户名",prop:"username"},{default:t(()=>[s(a,{modelValue:o(r).username,"onUpdate:modelValue":e[0]||(e[0]=l=>o(r).username=l)},null,8,["modelValue"])]),_:1}),s(u,{label:"密码",prop:"password"},{default:t(()=>[s(a,{modelValue:o(r).password,"onUpdate:modelValue":e[1]||(e[1]=l=>o(r).password=l)},null,8,["modelValue"])]),_:1}),s(u,{label:"确认密码",prop:"passwordConfirm"},{default:t(()=>[s(a,{modelValue:o(r).passwordConfirm,"onUpdate:modelValue":e[2]||(e[2]=l=>o(r).passwordConfirm=l)},null,8,["modelValue"])]),_:1}),s(u,null,{default:t(()=>[s(w,{type:"primary",onClick:g},{default:t(()=>e[3]||(e[3]=[y("注册")])),_:1})]),_:1})]),_:1},8,["model","rules"])])}}}),L=I(U,[["__scopeId","data-v-78eb6533"]]);export{L as default};
